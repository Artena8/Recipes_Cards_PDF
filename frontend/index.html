<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Jow Cards – Générateur PDF</title>
    <link rel="stylesheet" href="./styles.css" />
    </head>
    <body>
    <header class="topbar">
        <div class="container topbar__inner">
        <div class="brand">
            <div class="brand__logo">J</div>
            <div>
            <div class="brand__title">Jow Cards</div>
            <div class="brand__subtitle">Génère tes cartes recto/verso (8 par page)</div>
            </div>
        </div>

        <div class="status" id="status">Prête</div>
        </div>
    </header>

    <main class="container">
        <form id="cardsForm" class="card">
        <div class="card__header">
            <h1>Nouvelle planche</h1>
            <p>Remplis 8 recettes, envoie, et récupère le PDF.</p>
        </div>

        <div class="grid">
            <div class="field">
            <label for="collection">Titre collection</label>
            <input id="collection" name="collection" type="text" placeholder="Ex: Tout au four !" required />
            </div>

            <div class="field">
            <label for="outName">Nom du PDF</label>
            <input id="outName" name="outName" type="text" placeholder="Ex: recettes_onepan.pdf" />
            <small>Optionnel. Sinon le backend choisit un nom.</small>
            </div>
        </div>

        <div class="divider"></div>

        <div class="recipes-head">
            <h2>Les 8 recettes</h2>
            <button type="button" class="btn btn--ghost" id="fillDemo">Préremplir (demo)</button>
        </div>

        <div id="recipes" class="recipes"></div>

        <div class="actions">
            <button type="submit" class="btn btn--primary">Générer le PDF</button>
            <button type="button" class="btn" id="resetBtn">Réinitialiser</button>
        </div>
        </form>

        <section class="card" id="resultCard" hidden>
        <div class="card__header">
            <h2>Résultat</h2>
            <p>Ton PDF est prêt. Tu peux le télécharger ou le prévisualiser.</p>
        </div>

        <div class="actions">
            <a id="downloadLink" class="btn btn--primary" download="cartes.pdf">Télécharger le PDF</a>
            <button class="btn" id="revokeBtn" type="button">Nettoyer l’aperçu</button>
        </div>

        <div class="preview">
            <iframe id="pdfPreview" title="Aperçu PDF"></iframe>
        </div>
        </section>
    </main>

    <template id="recipeTpl">
        <section class="recipe card--sub">
        <div class="recipe__head">
            <h3>Recette <span class="idx"></span></h3>
            <span class="pill">8 max</span>
        </div>

        <div class="grid grid--2">
            <div class="field">
            <label>Titre recette</label>
            <input class="r-title" type="text" required placeholder="Ex: One pan poulet & citron" />
            </div>

            <div class="field">
            <label>Temps</label>
            <input class="r-time" type="text" required placeholder="Ex: 30 min | 1h | 1h 10" />
            <small>Formats conseillés : <b>30 min</b>, <b>1h</b>, <b>1h 10</b></small>
            </div>

            <div class="field grid-span-2">
            <label>URL</label>
            <input class="r-url" type="url" required placeholder="https://..." />
            </div>

            <div class="field">
            <label>Régime</label>
            <select class="r-regime" required>
                <option value="Omnivore">Omnivore</option>
                <option value="Poisson">Poisson</option>
                <option value="Végétarien">Végétarien</option>
                <option value="Végan">Végan</option>
            </select>
            </div>

            <div class="field">
            <label>Saison</label>
            <select class="r-saison" required>
                <option value="Printemps">Printemps</option>
                <option value="Été">Été</option>
                <option value="Automne">Automne</option>
                <option value="Hiver">Hiver</option>
            </select>
            </div>

            <div class="field grid-span-2">
            <label>Allergènes (multi)</label>
            <div class="checks">
                <label class="check"><input type="checkbox" value="fromage" class="r-all"/> fromage</label>
                <label class="check"><input type="checkbox" value="porc" class="r-all"/> porc</label>
                <label class="check"><input type="checkbox" value="sans_arachides" class="r-all"/> sans_arachides</label>
                <label class="check"><input type="checkbox" value="sans_gluten" class="r-all"/> sans_gluten</label>
                <label class="check"><input type="checkbox" value="sans_lactose" class="r-all"/> sans_lactose</label>
                <label class="check"><input type="checkbox" value="crustacés" class="r-all"/> crustacés</label>
            </div>
            <small>Ça doit matcher tes noms d’icônes côté backend.</small>
            </div>

            <div class="field grid-span-2">
            <label>Image</label>
            <input class="r-image" type="file" accept="image/*" required />
            <small>PNG/JPG conseillé. WEBP OK si ton backend le supporte.</small>
            </div>
        </div>
        </section>
    </template>

    <script src="./script.js"></script>
</body>
</html>
